@using GovUkDesignSystemDotNet
@using GovUkDesignSystemDotNet.Helpers
@model GovUkDesignSystemDotNet.ErrorSummaryViewModel

<div class="govuk-error-summary @(string.Join(" ", Model.Classes))"
     data-disable-auto-focus="@(Model.DisableAutoFocus.ToString().ToLower())"
     @(Model.Attributes.ToHtmlTagAttributes(Html))
     data-module="govuk-error-summary">
    
    @* Keep the role="alert" in a seperate child container to prevent a race condition between
       the focusing js at the alert, resulting in information getting missed in screen reader announcements *@
    <div role="alert">
        <h2 class="govuk-error-summary__title">
            @(Model.Title.Value)
        </h2>
        <div class="govuk-error-summary__body">
            @if (Model.Description != null)
            {
                <p>
                    @(Model.Description)
                </p>
            }
            
            @if (Model.Errors.Count > 0)
            {
                <ul class="govuk-list govuk-error-summary__list">
                    @foreach (ErrorSummaryItemViewModel error in Model.Errors)
                    {
                        <li>
                            @if (!string.IsNullOrWhiteSpace(error.Href))
                            {
                                <a href="@(error.Href)"
                                   @(error.Attributes.ToHtmlTagAttributes(Html))
                                   >
                                    @(error.HtmlOrText?.Value)
                                </a>
                            }
                            else
                            {
                                @(error.HtmlOrText?.Value)
                            }
                        </li>
                    }
                </ul>
            }
        </div>
    </div>
</div>
